$def with(json_data=None)

$var title = ctx.page.title
$var meta_description = ctx.page.meta_description
$var meta_keywords = ctx.page.meta_keywords
$var js_code = ctx.page.js_code
$var css_code = ctx.page.css_code

$if json_data is None:
    $:render_block(ctx.page_block)
$else:
    <script>
        var sgData = sgData || {};
        sgData.pageBlock = $:json_data.page_block;
        sgData.templateBlocks = $:json_data.template_blocks;
        sgData.pageId = $ctx.page.id;
    </script>
$if auth.has_role("admin", "editor"):
    $:render.site.pagemenu(ctx.page, json_data is None)
