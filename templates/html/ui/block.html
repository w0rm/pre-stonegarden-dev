$def with(b, blocks, page)
$if auth.get_user():
    <div class="block $b.template $b.css_class ${not b.is_published and "is_hidden" or ""}"
         data-id="$b.id" data-template="$b.template"
         data-position="$b.position" >
        $:render_block(b.template)(b, blocks, page)
    </div>
$elif b.is_published:
    <div class="block $b.template $b.css_class">
        $:render_block(b.template)(b, blocks, page)
    </div>
