$def with(block)
$# Categories block renders categories and subcategories
$ categories = [c for c in ctx.nav.children if c.type == "category"]
$if categories:
    <ul class="catalog-categories">
    $for category in categories:
        <li>
            <hr>
            <h3><a href="$category.path">$category.title</a></h3>
            $ subcategories = [c for c in category.get("pages", []) if c.type == "category"]
            $if subcategories:
                <nav class="catalog-subcategories-nav">
                    <ul>
                    $for subcategory in subcategories:
                        <li><a href="$subcategory.path">$subcategory.title</a></li>
                    </ul>
                </nav>
            <div class="row">
                <div class="four columns">
                </div>
                <div class="eight columns">
                    $:category.description_cached
                </div>
            </div>
        </li>
    </ul>
$else:
    <p>$_("Catalog is empty.")</p>
